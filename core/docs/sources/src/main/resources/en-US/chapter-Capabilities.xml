<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Media_Server_User_Guide.ent">
%BOOK_ENTITIES;
]>

<chapter id="chapter-Capabilities_Media_Server">
  <title>&THIS.PLATFORM; Media Server Capabilities</title>
	<para>
  There are four Media Server Endpoints. Each endpoint supports specific MGCP 
  packages and some or all of the events/signals defined in that package.
	</para>
  <variablelist>
    <title>Media Server Endpoints</title>
    <varlistentry>
      <term>Announcement Endpoint</term>
      <listitem>
        <para>
        The Announcement Endpoint is identified by the localname 
        <literal>/mobicents/media/aap/[1..10]</literal>.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>IVR Endpoint</term>
      <listitem>
        <para>
        The IVR Endpoint is identified by the localname 
        <literal>/mobicents/media/IVR/[1..10]</literal>.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>Conference Endpoint</term>
      <listitem>
        <para>
        The Conference Endpoint is identified by the localname 
        <literal>/mobicents/media/cnf/[1..60]</literal>.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>PacketRelay Endpoint</term>
      <listitem>
        <para>
        The PacketRelay Endpoint is identified by the localname 
        <literal>/mobicents/media/packetrelay/[1..10]</literal>.
        </para>
      </listitem>
    </varlistentry>
  </variablelist>
  <note>
    <para>
    The number in square brackets for each endpoint localname indicates the 
    range of endpoints configured and started by the Media Server.
    </para>
  </note>
  <para>
  There are three supported packages for each of the four endpoints: 
  Announcement (A), Advance Announcement (AU) and DTMF (D). The following 
  sections list the supported events/signals and their parameters for each 
  supported package.
  </para>
  <section>
    <title>Announcement (A)</title>
    <table frame="all">
      <title>Supported Events and Parameters</title>
      <tgroup align="left" cols="2" colsep="1" rowsep="1">
		  	<colspec colname="col1" colnum="1" />
		  	<colspec colname="col2" colnum="2" />
		  	<thead>
					<row>
						<entry>Supported Event</entry>
						<entry>Parameters</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>OperationComplete (oc)</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>Example: <emphasis role="italics">O: A/oc@1</emphasis></entry>
          </row>
          <row>
            <entry>OperationFailure (of)</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>Example: <emphasis role="italics">O: A/of@1</emphasis></entry>
          </row>
        </tbody>
      </tgroup>
    </table>
    <variablelist>
      <title>Supported Signals and their Parameters</title>
      <varlistentry>
        <term>PlayAnnouncement (ann)</term>
        <listitem>
          <para>
          The PlayAnnouncement Signal must be qualified by a string of 
          parameter(s). If PlayAnnouncement is not provided with a parameter 
          specifying some form of playable audio or text-to-speech text, an 
          error is returned to the application.
          </para>
          <para>
          The Play Announcement takes the URL of the media file to be played as 
          a parameter. The examples are:
          </para>
          <itemizedlist>
            <listitem>
              <para>
              On the remote server 
              <literal>http://127.0.0.1:8080/mgcpdemo/audio/RQNT-ULAW.wav</literal>: 
              <emphasis>S:A/ann@1(http://127.0.0.1:8080/mgcpdemo/audio/RQNT-ULAW.wav)</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
              On the local server where the media server is hosted 
              (<literal>file:/home/mobicents/RQNT-ULAW.wav</literal>): 
              <emphasis>S:A/ann@1(file:/home/mobicents/RQNT-ULAW.wav)</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
              In addition, the URL of the text file can also be passed, and the 
              Media Server would play that text file as TTS with the default 
              voice. For example, 
              <literal>http://ann.example.net/hello.txt</literal> or 
              <literal>file:/home/mobicents/hello.txt</literal>.
              </para>
            </listitem>
            <listitem>
              <para>
              Segment descriptors can also be used with the 
              <literal>ann</literal> signal to make up an announcement. The 
              only supported segment descriptor is '<literal>ts</literal>'. 
              '<literal>ts</literal>' specifies a text string to be converted 
              to speech. Optionally, the voice name '<literal>vc</literal>' can 
              also be passed to direct the media server to play this speech in 
              a given voice. For example, <literal>ts("Your text here") 
              vc("mbrola_us1")</literal>.
              </para>
              <para>
              <emphasis>S:A/ann@6(ts(You have pressed One) vc(Mbrola_US1))</emphasis>
              </para>
              <para>
              For supported voices, look at <xref 
              linkend="tab-mms-Standalone_Directory-Structure" />.
              </para>
            </listitem>
            <listitem>
              <para>
              The relative path of an audio/txt file can also be passed. For 
              example, <literal>RQNT-ULAW.wav</literal>.
              </para>
              <para>
              In this case, the Media Server will try to search for the 
              corresponding file in the <filename>${mms.media.dir}</filename> 
              folder.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Advance Announcement (AU)</title>
    <table frame="all">
      <title>Supported Events and Parameters</title>
      <tgroup align="left" cols="2" colsep="1" rowsep="1">
		  	<colspec colname="col1" colnum="1" />
		  	<colspec colname="col2" colnum="2" />
		  	<thead>
					<row>
						<entry>Supported Event</entry>
						<entry>Parameters</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>OperationComplete (oc)</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>Example: <emphasis role="italics">O: A/oc@1</emphasis></entry>
          </row>
          <row>
            <entry>OperationFailure (of)</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>Example: <emphasis role="italics">O: A/of@1</emphasis></entry>
          </row>
        </tbody>
      </tgroup>
    </table>
    <variablelist>
      <title>Supported Signals and their Parameters</title>
      <varlistentry>
        <term>PlayAnnouncement (ann)</term>
        <listitem>
          <para>
          The PlayAnnouncement Signal must be qualified by a string of 
          parameter(s). If PlayAnnouncement is not provided with a parameter 
          specifying some form of playable audio or text-to-speech text, an 
          error is returned to the application.
          </para>
          <para>
          The Play Announcement takes the URL of the media file to be played as 
          a parameter. The examples are:
          </para>
          <itemizedlist>
            <listitem>
              <para>
              On the remote server 
              <literal>http://127.0.0.1:8080/mgcpdemo/audio/RQNT-ULAW.wav</literal>: 
              <emphasis>S:A/ann@1(http://127.0.0.1:8080/mgcpdemo/audio/RQNT-ULAW.wav)</emphasis>.  
              </para>
            </listitem>
            <listitem>
              <para>
              On the local server where the media server is hosted 
              (<literal>file:/home/mobicents/RQNT-ULAW.wav</literal>): 
              <emphasis>S:A/ann@1(file:/home/mobicents/RQNT-ULAW.wav)</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
              In addition, the URL of the text file can also be passed, and the 
              Media Server would play that text file as TTS with the default 
              voice. For example, 
              <literal>http://ann.example.net/hello.txt</literal> or 
              <literal>file:/home/mobicents/hello.txt</literal>.
              </para>
            </listitem>
            <listitem>
              <para>
              Segment descriptors can also be used with the 
              <literal>ann</literal> signal to make up an announcement. The 
              only supported segment descriptor is '<literal>ts</literal>'. 
              '<literal>ts</literal>' specifies a text string to be converted 
              to speech. Optionally, the voice name '<literal>vc</literal>' can 
              also be passed to direct the media server to play this speech in 
              a given voice. For example, <literal>ts("Your text here") 
              vc("mbrola_us1")</literal>.
              </para>
              <para>
              <emphasis>S:A/ann@6(ts(You have pressed One) vc(Mbrola_US1))</emphasis>
              </para>
              <para>
              For supported voices, look at <xref 
              linkend="tab-mms-Standalone_Directory-Structure" />.
              </para>
            </listitem>
            <listitem>
              <para>
              The relative path of an audio/txt file can also be passed. For 
              example, <literal>RQNT-ULAW.wav</literal>.
              </para>
              <para>
              In this case, the Media Server will try to search for the 
              corresponding file in the <filename>${mms.media.dir}</filename> 
              folder.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Record (aupr)</term>
        <listitem>
          <para>
          The Record signal must be qualified by a string of parameter(s). If 
          Record is not provided with a parameter specifying the path (absolute 
          or relative) and name of an audio file, an error is returned to the 
          application.
          </para>
          <para>
          The URL can be an absolute URL, or it can be relative, in which case 
          the recorded file will be placed in the 
          <filename>${mms.media.dir}</filename> folder. The examples are:
          </para>
          <itemizedlist>
            <listitem>
              <para>
              On the remote server 
              <literal>http://127.0.0.1:8080/mgcpdemo/audio/recorded.wav</literal>: 
              <emphasis>S:AU/aupr@1(http://127.0.0.1:8080/mgcpdemo/audio/recorded.wav)</emphasis>.  
              </para>
            </listitem>
            <listitem>
              <para>
              On the local server where the media server is hosted 
              (<literal>file:/home/mobicents/recorded.wav</literal>): 
              <emphasis>S:AU/aupr@1(file:/home/mobicents/recorded.wav)</emphasis>.
              </para>
            </listitem>
            <listitem>
              <para>
              The relative path of the file can also be passed. For example, 
              <filename>recorded.wav</filename>.
              </para>
              <para>
              In this case the Media Server will create a recorded.wav file in 
              the <filename>${mms.media.dir}</filename> folder.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>DTMF (D)</title>
    <table frame="all">
      <title>Supported Events and Parameters</title>
      <tgroup align="left" cols="2" colsep="1" rowsep="1">
		  	<colspec colname="col1" colnum="1" />
		  	<colspec colname="col2" colnum="2" />
		  	<thead>
					<row>
						<entry>Supported Event</entry>
						<entry>Parameters</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>dtmf0</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf0@1</entry>
          </row>
          <row>
            <entry>dtmf1</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf1@1</entry>
          </row>
          <row>
            <entry>dtmf2</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf2@1</entry>
          </row>
          <row>
            <entry>dtmf3</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf3@1</entry>
          </row>
          <row>
            <entry>dtmf4</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf4@1</entry>
          </row>
          <row>
            <entry>dtmf5</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf5@1</entry>
          </row>
          <row>
            <entry>dtmf6</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf6@1</entry>
          </row>
          <row>
            <entry>dtmf7</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf7@1</entry>
          </row>
          <row>
            <entry>dtmf8</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf8@1</entry>
          </row>
          <row>
            <entry>dtmf9</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmf9@1</entry>
          </row>
          <row>
            <entry>dtmfA</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmfA@1</entry>
          </row>
          <row>
            <entry>dtmfB</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmfB@1</entry>
          </row>
          <row>
            <entry>dtmfC</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmfC@1</entry>
          </row>
          <row>
            <entry>dtmfD</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmfD@1</entry>
          </row>
          <row>
            <entry>dtmfHash</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmfHash@1</entry>
          </row>
          <row>
            <entry>dtmfStar</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>O: D/dtmfStar@1</entry>
          </row>
        </tbody>
      </tgroup>
    </table>
    <table frame="all">
      <title>Supported Signals and Parameters</title>
      <tgroup align="left" cols="2" colsep="1" rowsep="1">
		  	<colspec colname="col1" colnum="1" />
		  	<colspec colname="col2" colnum="2" />
		  	<thead>
					<row>
						<entry>Supported Signal</entry>
						<entry>Parameters</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>dtmf0</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf0@1</entry>
          </row>
          <row>
            <entry>dtmf1</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf1@1</entry>
          </row>
          <row>
            <entry>dtmf2</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf2@1</entry>
          </row>
          <row>
            <entry>dtmf3</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf3@1</entry>
          </row>
          <row>
            <entry>dtmf4</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf4@1</entry>
          </row>
          <row>
            <entry>dtmf5</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf5@1</entry>
          </row>
          <row>
            <entry>dtmf6</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf6@1</entry>
          </row>
          <row>
            <entry>dtmf7</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf7@1</entry>
          </row>
          <row>
            <entry>dtmf8</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf8@1</entry>
          </row>
          <row>
            <entry>dtmf9</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmf9@1</entry>
          </row>
          <row>
            <entry>dtmfA</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmfA@1</entry>
          </row>
          <row>
            <entry>dtmfB</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmfB@1</entry>
          </row>
          <row>
            <entry>dtmfC</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmfC@1</entry>
          </row>
          <row>
            <entry>dtmfD</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmfD@1</entry>
          </row>
          <row>
            <entry>dtmfHash</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmfHash@1</entry>
          </row>
          <row>
            <entry>dtmfStar</entry>
            <entry>NA</entry>
          </row>
          <row>
            <entry/>
            <entry>S:D/dtmfStar@1</entry>
          </row>
        </tbody>
      </tgroup>
    </table>
  </section>
</chapter>
